{"version":3,"sources":["components/SearchForm.js","components/FilterNamesToShow.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["SearchForm","props","onChange","handleFilterChange","FilterNamesToShow","namesMatch","newFilter","persons","filter","p","name","toUpperCase","startsWith","map","person","key","number","value","id","onClick","deleteOnePerson","PersonForm","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","type","baseUrl","axios","get","then","response","data","personObject","post","delete","catch","error","put","Notification","message","isAlert","className","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","alertMessage","setAlertMessage","setAlert","useEffect","personService","setTimeout","event","target","preventDefault","includes","personData","personId","toString","personIndex","findIndex","window","confirm","newPersons","alert","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d67fa879.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst SearchForm = (props) => {\r\n    return (\r\n        <div>\r\n            Filter shown with <input\r\n                onChange = {props.handleFilterChange}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchForm","import React from 'react'\r\n\r\nconst FilterNamesToShow = (props) => {\r\n    const namesMatch = props.newFilter !== \"\"\r\n    ? props.persons.filter(p => p.name.toUpperCase().startsWith(props.newFilter.toUpperCase()))\r\n    : props.persons\r\n\r\n        return (\r\n            <div>\r\n                <ul>\r\n                    {namesMatch.map((person) =>\r\n                        <p key={person.name}>{person.name} {person.number}\r\n                            <button value = {person.name} id = {person.id} onClick = {props.deleteOnePerson}>Delete</button>\r\n                        </p>)\r\n                    }\r\n                </ul>\r\n            </div>\r\n        ) \r\n    }\r\n\r\nexport default FilterNamesToShow","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.addName}>\r\n                    <div>\r\n                        name: <input value = {props.newName}\r\n                            onChange={props.handleNameChange}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        number: <input value = {props.newNumber}\r\n                        onChange = {props.handleNumberChange}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <button type=\"submit\">add</button>\r\n                    </div>\r\n                </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\n\r\nconst baseUrl = \"/api/persons\"\r\n\r\n//hakeminen\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n//lähetetään uudet tiedot\r\nconst create = personObject => {\r\n    const request = axios.post(baseUrl, personObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request\r\n            .then(response => response.data)\r\n            .catch((error) => {\r\n                throw error.response.data\r\n            })\r\n}\r\n\r\nconst updateNumber = (id, personObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    deletePerson,\r\n    updateNumber\r\n}","import React from 'react'\r\n\r\nconst Notification = (props) => {\r\n    const message = props.message\r\n    const isAlert = props.isAlert\r\n\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    const className = isAlert ? \"error\" : \"notification\"\r\n    return (\r\n        <div className={className}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport './App.css'\r\nimport SearchForm from './components/SearchForm'\r\nimport FilterNamesToShow from './components/FilterNamesToShow'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\n\r\n\r\n\r\nconst App = () => {\r\n\r\n    const [persons, setPersons] = useState([])\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [newFilter, setNewFilter] = useState(\"\")\r\n    const [alertMessage, setAlertMessage] = useState(null)\r\n    const [isAlert, setAlert] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(persons => {\r\n                setPersons(persons)\r\n            })\r\n            .catch(error => {\r\n                setAlert(true)\r\n                setAlertMessage(`Something went wrong`)\r\n                setTimeout(() => {\r\n                    setAlertMessage(null)\r\n                    setAlert(false)\r\n                }, 3000)\r\n            })\r\n\r\n    }, [])\r\n\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleFilterChange = (event) => {\r\n        setNewFilter(event.target.value)\r\n    }\r\n\r\n    const addName = (event) => {\r\n        event.preventDefault()\r\n        const personObject = {\r\n            name: newName,\r\n            number: newNumber\r\n        }\r\n\r\n        if (persons.map(p => p.name).includes(newName)) {\r\n            const personData = persons.filter(p => p.name === newName)\r\n            \r\n            if (personData[0].number !== newNumber) {\r\n                const personId = personData[0].id.toString()\r\n                // const testFind = (p) => p.id.toString() === personId \r\n                const personIndex = persons.findIndex((p) => p.id.toString() === personId)\r\n                window.confirm(`${newName} is already added to phonebook, replace\r\n                the old number with a new one?`)\r\n                personService\r\n                    .updateNumber(personId, personObject)\r\n                    .then(person => {\r\n                        const newPersons = [...persons]\r\n                        newPersons[personIndex] = personObject\r\n                        setPersons(newPersons)\r\n                        setAlertMessage(`Number changed for ${newName}`)\r\n                        setTimeout(() => {\r\n                            setAlertMessage(null)\r\n\r\n                        }, 3000)\r\n                    })\r\n                    .catch(error => {\r\n                        setAlert(true)\r\n                        setAlertMessage(`Information of ${newName} has already been removed from server`)\r\n                        setTimeout(() => {\r\n                            setAlertMessage(null)\r\n                            setAlert(false)\r\n                        }, 3000)\r\n                    })\r\n\r\n            } else {\r\n                window.alert(`${newName} is already added to phonebook`)\r\n            }\r\n\r\n        } else {\r\n            personService\r\n                .create(personObject)\r\n                .then(person => {\r\n                    setPersons(persons.concat(person))\r\n                    setAlertMessage(`Added ${newName}`)\r\n                    setTimeout(() => {\r\n                        setAlertMessage(null)\r\n                    }, 3000)\r\n                })\r\n                .catch(error => {    \r\n                    setAlert(true)\r\n                    setAlertMessage(error.response.data.error)\r\n                    setTimeout(() => {\r\n                        setAlertMessage(null)\r\n                        setAlert(false)\r\n                    }, 3000)\r\n                })\r\n        }\r\n        setNewName('')\r\n        setNewNumber('')\r\n    }\r\n\r\n    const deleteOnePerson = (event) => {\r\n\r\n        if (window.confirm(`Delete ${event.target.value}?`)) {\r\n            const personId = event.target.id.toString()\r\n            personService\r\n                .deletePerson(event.target.id)\r\n                .then(data => {\r\n                    setPersons(persons.filter(p => p.id.toString() !== personId))\r\n                })\r\n\r\n            setAlertMessage(`Deleted ${event.target.value}`)\r\n            setTimeout(() => {\r\n                setAlertMessage(null)\r\n            }, 3000)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={alertMessage} isAlert={isAlert} />\r\n            <SearchForm handleFilterChange={handleFilterChange} />\r\n\r\n            <h2>Add a new</h2>\r\n            <PersonForm addName={addName} newName={newName} newNumber={newNumber}\r\n                handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}\r\n            />\r\n\r\n            <h2>Numbers</h2>\r\n            <FilterNamesToShow persons={persons} newFilter={newFilter} deleteOnePerson={deleteOnePerson} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}